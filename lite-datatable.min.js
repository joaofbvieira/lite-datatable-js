/**
 * Lite Datatable 1.0
 * https://github.com/joaofbvieira/lite-datatable-js
 * 2018 Jo√£o Pedro Vieira
 */
function LiteDataTable(){this.table=null,this.numberOfRecords=0,this.numberOfPages=0,this.recordsPerPage=0,this.currentPage=1,this.searchText="",this.uniqueId="",this.firstPageClass="",this.previousPageClass="",this.currentPageClass="",this.nextPageClass="",this.lastPageClass="",this.selectRecordsPerPageClass="",this.searchTextClass="",this.tableLinesClass="",this.linesToRender=null,this.optionsRecordsPerPage=0,this.searchText_isWaiting=!1,this.searchText_currentTimeout=null,this.currentSearchText="",this.captionLabelRecordsPerPage="",this.captionSearchInput="",this.captionButtonFirstPage="",this.captionButtonPreviousPage="",this.captionButtonNextPage="",this.captionButtonLastPage="",this.showRecordsPerPage=!0,this.showSearchInput=!0,this.cssClassForRecordsPerPageContainer="",this.cssClassForSearchTextContainer="",this.cssClassForContainerTopFields="",this.cssClassForContainerBottomFields="",this.cssClassForButtonFirstPage="",this.cssClassForButtonPreviousPage="",this.cssClassForButtonNextPage="",this.cssClassForButtonLastPage="",this.cssClassForSpanCurrentPage="",this.cssClassForInputSearch="",this.cssClassForSelectRecordsPerPage="",this.cssClassForLabelRecordsPerPage=""}LiteDataTable.prototype.init=function(s){this.loadParameters(s),this.generateAndSetUniqueId(),this.configureTableLines(),this.applyFilterToTableLines(),this.calculatePagesAndRecords(),this.render()},LiteDataTable.prototype.loadParameters=function(s){this.table=s.table,s.recordsPerPage?this.recordsPerPage=s.recordsPerPage:this.recordsPerPage=10,s.optionsRecordsPerPage?this.optionsRecordsPerPage=s.optionsRecordsPerPage:this.optionsRecordsPerPage=[10,50,100],this.optionsRecordsPerPage.indexOf(this.recordsPerPage)<0&&this.optionsRecordsPerPage.push(this.recordsPerPage),s.captionLabelRecordsPerPage?this.captionLabelRecordsPerPage=s.captionLabelRecordsPerPage:this.captionLabelRecordsPerPage="Records per page:",s.captionSearchInput?this.captionSearchInput=s.captionSearchInput:this.captionSearchInput="Search",s.captionButtonFirstPage?this.captionButtonFirstPage=s.captionButtonFirstPage:this.captionButtonFirstPage="<<",s.captionButtonPreviousPage?this.captionButtonPreviousPage=s.captionButtonPreviousPage:this.captionButtonPreviousPage="<",s.captionButtonNextPage?this.captionButtonNextPage=s.captionButtonNextPage:this.captionButtonNextPage=">",s.captionButtonLastPage?this.captionButtonLastPage=s.captionButtonLastPage:this.captionButtonLastPage=">>",null!=s.showRecordsPerPage?this.showRecordsPerPage=s.showRecordsPerPage:this.showRecordsPerPage=!0,null!=s.showSearchInput?this.showSearchInput=s.showSearchInput:this.showSearchInput=!0,s.cssClassForRecordsPerPageContainer?this.cssClassForRecordsPerPageContainer=s.cssClassForRecordsPerPageContainer:this.cssClassForRecordsPerPageContainer="",s.cssClassForSearchTextContainer?this.cssClassForSearchTextContainer=s.cssClassForSearchTextContainer:this.cssClassForSearchTextContainer="",s.cssClassForLabelRecordsPerPage?this.cssClassForLabelRecordsPerPage=s.cssClassForLabelRecordsPerPage:this.cssClassForLabelRecordsPerPage="",s.cssClassForSelectRecordsPerPage?this.cssClassForSelectRecordsPerPage=s.cssClassForSelectRecordsPerPage:this.cssClassForSelectRecordsPerPage="",s.cssClassForInputSearch?this.cssClassForInputSearch=s.cssClassForInputSearch:this.cssClassForInputSearch="",s.cssClassForContainerTopFields?this.cssClassForContainerTopFields=s.cssClassForContainerTopFields:this.cssClassForContainerTopFields="",s.cssClassForContainerBottomFields?this.cssClassForContainerBottomFields=s.cssClassForContainerBottomFields:this.cssClassForContainerBottomFields="",s.cssClassForButtonFirstPage?this.cssClassForButtonFirstPage=s.cssClassForButtonFirstPage:this.cssClassForButtonFirstPage="",s.cssClassForButtonPreviousPage?this.cssClassForButtonPreviousPage=s.cssClassForButtonPreviousPage:this.cssClassForButtonPreviousPage="",s.cssClassForButtonNextPage?this.cssClassForButtonNextPage=s.cssClassForButtonNextPage:this.cssClassForButtonNextPage="",s.cssClassForButtonLastPage?this.cssClassForButtonLastPage=s.cssClassForButtonLastPage:this.cssClassForButtonLastPage="",s.cssClassForSpanCurrentPage?this.cssClassForSpanCurrentPage=s.cssClassForSpanCurrentPage:this.cssClassForSpanCurrentPage=""},LiteDataTable.prototype.render=function(){var s=this;$(s.table).before(s.getTopComponentHTML()),$(s.table).after(s.getBottomComponentHTML()),s.bindDomEvents(),s.setCurrentPage(1)},LiteDataTable.prototype.configureTableLines=function(){$(this.table).children("tbody").children("tr:visible").addClass(this.tableLinesClass)},LiteDataTable.prototype.bindDomEvents=function(){var e=this;$("."+e.firstPageClass).click(function(){e.firstPage_onClick()}),$("."+e.previousPageClass).click(function(){e.previousPage_onClick()}),$("."+e.nextPageClass).click(function(){e.nextPage_onClick()}),$("."+e.lastPageClass).click(function(){e.lastPage_onClick()}),$("."+e.selectRecordsPerPageClass).change(function(){e.selectRecordsPerPage_onChange()}),$("."+e.searchTextClass).keyup(function(s){40!=s.keyCode&&38!=s.keyCode&&13!=s.keyCode&&(e.searchText_isWaiting&&clearTimeout(e.searchText_currentTimeout),e.searchText_currentTimeout=setTimeout(function(){e.searchText_onKeyUp()},500),e.searchText_isWaiting=!0)})},LiteDataTable.prototype.calculatePagesAndRecords=function(){var s=this;s.numberOfRecords=s.linesToRender.length,s.numberOfPages=Math.ceil(s.numberOfRecords/s.recordsPerPage)},LiteDataTable.prototype.getBottomComponentHTML=function(){var s="";return this.numberOfPages<=1&&(s='disabled="disabled"'),' <div class="'+this.cssClassForContainerBottomFields+'" >                     <a class="'+this.cssClassForButtonFirstPage+" "+this.firstPageClass+'" disabled="disabled"> '+this.captionButtonFirstPage+' </a>                     <a class="'+this.cssClassForButtonPreviousPage+" "+this.previousPageClass+'" disabled="disabled"> '+this.captionButtonPreviousPage+' </a>                     <span class="'+this.cssClassForSpanCurrentPage+" "+this.currentPageClass+'"> 1 / '+this.numberOfPages+' </span>                     <a class="'+this.cssClassForButtonNextPage+" "+this.nextPageClass+'" '+s+"> "+this.captionButtonNextPage+' </a>                     <a class="'+this.cssClassForButtonLastPage+" "+this.lastPageClass+'" '+s+"> "+this.captionButtonLastPage+" </a>                 </div>"},LiteDataTable.prototype.getTopComponentHTML=function(){var a=this,r="";a.numberOfPages;var s=" display: block; ";a.showRecordsPerPage||(s=" display: none; ");var e=" display: block; ";a.showSearchInput||(e=" display: none; ");var t=" display: block; ";a.showSearchInput||a.showRecordsPerPage||(t=" display: none; "),a.optionsRecordsPerPage.sort(function(s,e){return s-e});var o="float: left;";""!=a.cssClassForRecordsPerPageContainer&&(o="");var i="float: right;";""!=a.cssClassForSearchTextContainer&&(i="");var n="width: 100%; margin-top: 10px; margin-bottom: 10px; height: 40px;";""!=a.cssClassForContainerTopFields&&(n="");var c="float: left; vertical-align: middle; line-height: 35px;";""!=a.cssClassForLabelRecordsPerPage&&(c="");var l="float: left; width: auto; margin-left: 5px;";return""!=a.cssClassForSelectRecordsPerPage&&(l=""),r=' <div class="'+a.cssClassForContainerTopFields+'" style="'+n+" "+t+'">                     <div class="'+a.cssClassForRecordsPerPageContainer+'" style="'+o+" "+s+'">                         <span class="'+a.cssClassForLabelRecordsPerPage+'" style="'+c+'">'+a.captionLabelRecordsPerPage+'</span>                         <select class="'+a.cssClassForSelectRecordsPerPage+" "+a.selectRecordsPerPageClass+'" style="'+l+'">',$.each(a.optionsRecordsPerPage,function(s,e){var t="";e==a.recordsPerPage&&(t='selected="selected"'),r+='<option value="'+e+'" '+t+">"+e+"</option>"}),r+='        </select>                     </div>                     <div class="'+a.cssClassForSearchTextContainer+'" style="'+i+" "+e+'">                         <input type="text" class="'+a.searchTextClass+" "+a.cssClassForInputSearch+'" placeholder="'+a.captionSearchInput+'" />                     </div>                 </div> '},LiteDataTable.prototype.generateAndSetUniqueId=function(){this.uniqueId="_"+Math.random().toString(36).substr(2,9),this.firstPageClass=this.uniqueId+"-first-page",this.previousPageClass=this.uniqueId+"-previous-page",this.currentPageClass=this.uniqueId+"-actual-page",this.nextPageClass=this.uniqueId+"-next-page",this.lastPageClass=this.uniqueId+"-last-page",this.selectRecordsPerPageClass=this.uniqueId+"-select-records-per-page",this.searchTextClass=this.uniqueId+"-input-search-text",this.tableLinesClass=this.uniqueId+"-lines-table-to-paginate"},LiteDataTable.prototype.firstPage_onClick=function(){this.setCurrentPage(1)},LiteDataTable.prototype.previousPage_onClick=function(){if(1==this.currentPage)return!1;this.setCurrentPage(this.currentPage-1)},LiteDataTable.prototype.nextPage_onClick=function(){if(this.currentPage>=this.numberOfPages)return!1;this.setCurrentPage(this.currentPage+1)},LiteDataTable.prototype.lastPage_onClick=function(){this.setCurrentPage(this.numberOfPages)},LiteDataTable.prototype.selectRecordsPerPage_onChange=function(){this.recordsPerPage=$("."+this.selectRecordsPerPageClass).val(),this.calculatePagesAndRecords(),this.setCurrentPage(1)},LiteDataTable.prototype.searchText_onKeyUp=function(){var s=$("."+this.searchTextClass).val();if((s=this.parseSearchText(s))==this.currentSearchText)return!0;this.currentSearchText=s,this.applyFilterToTableLines(),this.calculatePagesAndRecords(),this.setCurrentPage(1)},LiteDataTable.prototype.setCurrentPage=function(s){var e=this;e.currentPage=s,$("."+e.tableLinesClass).hide();var t=e.currentPage*e.recordsPerPage-e.recordsPerPage,a=e.currentPage*e.recordsPerPage;$(e.linesToRender).slice(t,a).show(),e.updateCaptionAndStateOfPaginator()},LiteDataTable.prototype.updateCaptionAndStateOfPaginator=function(){var s=this;0==s.numberOfPages?$("."+s.currentPageClass).text("0 / 0"):$("."+s.currentPageClass).text(s.currentPage+" / "+s.numberOfPages),$("."+s.firstPageClass).removeAttr("disabled"),$("."+s.previousPageClass).removeAttr("disabled"),$("."+s.nextPageClass).removeAttr("disabled"),$("."+s.lastPageClass).removeAttr("disabled"),1!=s.currentPage&&0!=s.numberOfPages||($("."+s.firstPageClass).attr("disabled","disabled"),$("."+s.previousPageClass).attr("disabled","disabled")),s.currentPage!=s.numberOfPages&&0!=s.numberOfPages||($("."+s.nextPageClass).attr("disabled","disabled"),$("."+s.lastPageClass).attr("disabled","disabled"))},LiteDataTable.prototype.parseSearchText=function(s){if(null==s||null==s)return"";s=(s=s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")).toLowerCase();var e={a:/[\xE0-\xE6]/g,e:/[\xE8-\xEB]/g,i:/[\xEC-\xEF]/g,o:/[\xF2-\xF6]/g,u:/[\xF9-\xFC]/g,c:/\xE7/g,n:/\xF1/g};for(var t in e){var a=e[t];s=s.replace(a,t)}return s},LiteDataTable.prototype.applyFilterToTableLines=function(){var t=this,s=$("."+t.tableLinesClass);""!=t.currentSearchText?t.linesToRender=s.filter(function(s,e){return 0<=t.parseSearchText($(e).text()).indexOf(t.currentSearchText)}):t.linesToRender=s};
